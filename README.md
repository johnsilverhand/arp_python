# arp_python
本项目是笔者在南京航空航天大学泛在网技术（类同计算机网络，增加物联网的相关知识）实验中，使用python对arp协议进行模拟的程序。本项目的目的是为了更好的理解arp协议的工作原理，以及python的socket编程。

## 运行环境
- 语言：python3.10
- 系统：windows11
- IDE：vscode
- 第三方库：scapy，Tkinter
  ```shell
    pip install scapy
    pip install tkinter
  ```
- 在windows系统下，需要安装NPCAP软件，用于抓包
- 可同时在wiresahrk中查看抓包情况
- **需要管理员权限运行程序**
  
## 实现功能
- 构造ARP包：获取自己的MAC地址（可以手工输入）和IP地址，根据输入的目的IP地址add，组成ARP包并发送；
- 接收ARP包：接收ARP包，解析出源MAC地址和源IP地址，并显示在界面上；
- 采用图形界面，查看收到回应的结果
- 注：IP报文的目的地址为add，帧的目的MAC地址为广播地址（把帧组好，用 **raw socket**直接传的）

## 程序运行过程介绍
在实验中，程序先获取发送方的ip地址和MAC地址，然后先构造Ethernet 头部信息：目的MAC地址（广播地址），接着为发送方MAC地址，然后为协议类型08.06，此处为ARP请求即：”ff:ff:ff:ff:ff:ff”+“发送方MAC地址”+”08:06”,接着构造arp头部报文信息， （以太网硬件）00：01：（协议类型）08：00：IP地址：（硬件地址长度）06：（协议地址长度）04：（操作类型：ARP请求）00.01：

发送方MAC地址：发送方IP地址：目标MAC地址(请求时为0：0：0：0：0：0)：目标IP地址。最后组装成帧使用原始套接字发送出去。同时使用嗅探功能函数监听应答报文。

